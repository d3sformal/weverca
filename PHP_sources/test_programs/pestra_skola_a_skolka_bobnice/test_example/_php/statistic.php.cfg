digraph g {node [shape=box]
 graph[rankdir="TB", concentrate=true];node0[label="Body
$sql = sql_select('pages', 'count(*) as pages, script', \"where deleted = 0 group by script order by script\")
$pages = array(0,0,0,0,0,0,0)
"]
node1[label=""]
node2[label=""]
node3[label="$data = mysql_fetch_array( sql_select('galery', 'count(*) as galery', \"where zob = 1\") )
$pages[5] = $data['galery']
$pages[6] = \"neznámo\"
$pages[6] = round($pages[6] / 1000000, 3) .\" MB\"
echo \"\n<table class=\\"list\\" align=\\"center\\" width=\\"690px\\" ><tr><th colspan=\\"7\\" >Statistika webu</th></tr>\";
echo \"\n <tr><th>Rubrik</th><th>Článků</th><th>Galerií</th><th>Alb v galeriích</th><th>Celkový počet stránek</th><th>Obrázků v albech</th><th>Celková velikost galerie</th></tr>\";
echo \"<tr>\";
$x = 0
"]
node4[label="die(\"<h1>Chyba vstupu</h1>\")
"]
node5[label="Body
"]
node6[label="$pages[0] = $data['pages']
"]
node7[label="$pages[1] = $data['pages']
"]
node8[label="$pages[2] = $data['pages']
"]
node9[label="$pages[3] = $data['pages']
"]
node10[label="$pages[4] += $data['pages']
"]
node11[label=""]
node12[label=""]
node13[label=""]
node14[label=""]
node15[label=""]
node16[label=""]
node17[label="echo \"<td>$pages[$x]</td>\";
"]
node18[label="echo \"</tr>\n</table>\";
$month = date('Y-m-d', strtotime('-1 month'))
$week = date('Y-m-d', strtotime('-1 week'))
$yesterday = date('Y-m-d', strtotime('-1 day'))
$today = date('Y-m-d')
$sql = sql_select('visits', \"DATE_FORMAT(datum, '%Y-%m-%d') as day, count(*) as view, sum(visit) as visit\",
    \"where datum >= '$month' group by day order by datum desc\"
  )
$data = mysql_fetch_array( sql_select('visits', \"DATE_FORMAT(datum, '%d.%m.%Y') as day, count(*) as view, sum(visit) as visit\",
    \"order by datum\"
  ))
$start = 0
$visit = array(0,0,0,0,0)
$view = array(0,0,0,0,0)
"]
node19[label="$x++
"]
node20[label="$visit[4] = $data['visit']
$view[4] = $data['view']
$start = $data['day']
"]
node21[label=""]
node22[label=""]
node23[label="echo \"\n<table class=\\"list\\" align=\\"center\\" ><tr><th colspan=\\"6\\" >Návštěvnost webu</th></tr>\";
echo \"\n  <tr><td width=\\"150px\\">&nbsp;</td><th width=\\"100px\\" >Dnes</th><th width=\\"100px\\">Včera</th><th width=\\"100px\\">Týden</th><th width=\\"100px\\">Měsíc</th><th width=\\"100px\\">Celkem</th></tr>\";
echo \"\n  <tr><td>&nbsp;</td><td>\". date(\"d.m.Y\") .\"</td><td>\". date('d.m.Y', strtotime('-1 day')) .\"</td><td>od \". date('d.m.Y', strtotime('-1 week')) .\"</td><td>od \". date('d.m.Y', strtotime('-1 month')) .\"</td><td>od $start</td></tr>\";
echo \"\n  <tr><th>Návštěvníků</th>\";
$x = 0
"]
node24[label="$visit[0] = $data['visit']
$view[0] = $data['view']
"]
node25[label=""]
node26[label="$visit[3] += $data['visit']
$view[3] += $data['view']
"]
node27[label=""]
node28[label="$visit[1] = $data['visit']
$view[1] = $data['view']
"]
node29[label=""]
node30[label="$visit[2] += $data['visit']
$view[2] += $data['view']
"]
node31[label="echo \"<td>$visit[$x]</td>\";
"]
node32[label="echo \"</tr>\";
echo \"\n  <tr><th>Zobrazení stránek</th>\";
$x = 0
"]
node33[label="$x++
"]
node34[label=""]
node35[label="echo \"<td>$view[$x]</td>\";
"]
node36[label="echo \"</tr>\";
echo \"\n</table>\";
$sql = sql_select('visits', \"count(*) as view, pages.id, pages.name, pages.adr\",
    \"left join pages on pages.id = visits.pid where visits.pid != 0 group by visits.pid order by view desc\", 10
  )
echo \"\n<table class=\\"list\\" align=\\"center\\" ><tr><th colspan=\\"4\\" >Nejnavštěvovanější stránky</th></tr>\";
echo \"\n  <tr><th width=\\"80px\\">Pořadí</th><th width=\\"280px\\">Jméno stránky</th><th width=\\"150px\\">Počet návštěv</th><th width=\\"150px\\">Podíl na návštěvnosti</th></tr>\";
$others = $all = $view[4]
$x = 1
"]
node37[label="$x++
"]
node38[label=""]
node39[label="$others -= $data['view']
$percentil = round( ($data['view'] * 100) /$all , 2)
echo \"\n <tr><th>$x</th><td><a href=\\"index.php?p=$data[id]_$data[adr]\\" >$data[name]</a></td><td>$data[view]</td><td>$percentil %</td></tr>\";
"]
node40[label=""]
node41[label="$x++
"]
node42[label="$percentil = round( ($others * 100) /$all , 2)
echo \"\n <tr><th colspan=\\"2\\" >Ostatní</th><td>$others</td><td>$percentil %</td></tr>\";
"]
node43[label="echo \"\n</table>\";
"]
node44[label=""]
node0 -> node2[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node0 -> node3[headport=n, tailport=s,label=" else  "]
node1 -> node4[headport=n, tailport=s,label="AUTORIZACE != \"Q.&dJhůs63d5dS=d56sLc5%\" or !AUTORIZACE"]
node1 -> node5[headport=n, tailport=s,label=" else  "]
node2 -> node6[headport=n, tailport=s,label="$data['script']='rubric'"]
node2 -> node7[headport=n, tailport=s,label="$data['script']=''"]
node2 -> node8[headport=n, tailport=s,label="$data['script']='galery'"]
node2 -> node9[headport=n, tailport=s,label="$data['script']='album'"]
node2 -> node10[headport=n, tailport=s,label=" else  "]
node3 -> node11[headport=n, tailport=s,label="   "]
node4 -> node5[headport=n, tailport=s,label="   "]
node5 -> node12[headport=n, tailport=s,label="   "]
node6 -> node3[headport=n, tailport=s,label="   "]
node7 -> node3[headport=n, tailport=s,label="   "]
node8 -> node3[headport=n, tailport=s,label="   "]
node9 -> node3[headport=n, tailport=s,label="   "]
node10 -> node2[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node10 -> node3[headport=n, tailport=s,label=" else  "]
node11 -> node17[headport=n, tailport=s,label="$x < 7"]
node11 -> node18[headport=n, tailport=s,label=" else  "]
node13 -> node7[headport=n, tailport=s,label="   "]
node14 -> node8[headport=n, tailport=s,label="   "]
node15 -> node9[headport=n, tailport=s,label="   "]
node16 -> node10[headport=n, tailport=s,label="   "]
node17 -> node19[headport=n, tailport=s,label="   "]
node18 -> node20[headport=n, tailport=s,label="$data"]
node18 -> node21[headport=n, tailport=s,label=" else  "]
node19 -> node11[headport=n, tailport=s,label="   "]
node20 -> node21[headport=n, tailport=s,label="   "]
node21 -> node22[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node21 -> node23[headport=n, tailport=s,label=" else  "]
node22 -> node24[headport=n, tailport=s,label="$data['day'] == $today"]
node22 -> node25[headport=n, tailport=s,label=" else  "]
node23 -> node27[headport=n, tailport=s,label="   "]
node24 -> node25[headport=n, tailport=s,label="   "]
node25 -> node28[headport=n, tailport=s,label="$data['day'] == $yesterday"]
node25 -> node29[headport=n, tailport=s,label=" else  "]
node26 -> node22[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node26 -> node23[headport=n, tailport=s,label=" else  "]
node27 -> node31[headport=n, tailport=s,label="$x < 5"]
node27 -> node32[headport=n, tailport=s,label=" else  "]
node28 -> node29[headport=n, tailport=s,label="   "]
node29 -> node30[headport=n, tailport=s,label="$data['day'] >= $week"]
node29 -> node26[headport=n, tailport=s,label=" else  "]
node30 -> node26[headport=n, tailport=s,label="   "]
node31 -> node33[headport=n, tailport=s,label="   "]
node32 -> node34[headport=n, tailport=s,label="   "]
node33 -> node27[headport=n, tailport=s,label="   "]
node34 -> node35[headport=n, tailport=s,label="$x < 5"]
node34 -> node36[headport=n, tailport=s,label=" else  "]
node35 -> node37[headport=n, tailport=s,label="   "]
node36 -> node38[headport=n, tailport=s,label="   "]
node37 -> node34[headport=n, tailport=s,label="   "]
node38 -> node39[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node38 -> node40[headport=n, tailport=s,label=" else  "]
node39 -> node41[headport=n, tailport=s,label="   "]
node40 -> node42[headport=n, tailport=s,label="$others"]
node40 -> node43[headport=n, tailport=s,label=" else  "]
node41 -> node38[headport=n, tailport=s,label="   "]
node42 -> node43[headport=n, tailport=s,label="   "]
node43 -> node44[headport=n, tailport=s,label="   "]

}

