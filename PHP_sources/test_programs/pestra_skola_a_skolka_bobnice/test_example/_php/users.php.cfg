digraph g {node [shape=box]
 graph[rankdir="TB", concentrate=true];node0[label="Post
"]
node1[label="Form
"]
node2[label="Body
global $_page;
echo \"<div class=\\"toolbox\\">\";
ToolButton(\"p=$_GET[p]\", 'Zobrazit výpis administrátorů', 'page', false)
ToolButton(\"p=$_GET[p]&amp;a=user&amp;f=add\", 'Přidat administrátora', 'plus')
echo \"</div><div class=\\"float_cl\\">&nbsp;</div>\";
"]
node3[label="Ajax
ShowUsers()
"]
node4[label="ShowUsers
global $_page;
global $_inf;
$sql = sql_select('users',\"id, name, register, last_login, state ,AES_DECRYPT(mail, sha(concat('\".MASTER_CODE.\"' , no1))) as mail\",
    \"where state > 0 order by id\"
    , (USERS_LIMIT * ($_inf['s'] - 1) ) .\",\". USERS_LIMIT
  )
$data = mysql_fetch_array( sql_select('users','count(*) as ct',
    \"where state > 0\", 1
  ))
$count = $data ? $data['ct'] : 0
echo \"\n<table class=\\"list\\" align=\\"center\\"><tr><td colspan=\\"6\\" class=\\"stat\\" >\";
"]
node5[label="AddUser
"]
node6[label="DeleteUser
$id = GetCollum(1)
"]
node7[label="AddUserForm
global $_inf;
"]
node8[label="DeleteUserForm
global $_inf;
global $_page;
"]
node9[label=""]
node10[label="AddUser()
"]
node11[label="DeleteUser()
"]
node12[label=""]
node13[label="AddUserForm()
"]
node14[label="DeleteUserForm()
"]
node15[label="return false;
"]
node16[label="return;
"]
node17[label="echo \"\n<div id=\\"ajax_target\\" >\";
ShowUsers()
echo \"\n</div>\";
"]
node18[label=""]
node19[label="echo \"</td></tr><tr><th width=\\"40px\\">ID</th><th width=\\"200\\">Přihlašovací jméno</th><th width=\\"200\\">E-mail</th><th width=\\"140\\">Registrován</th><th width=\\"140\\">Poslední přihlášení</th><th width=\\"30px\\">&nbsp;</th></tr>\";
"]
node20[label="echo \"</table>\";
"]
node21[label="return;
"]
node22[label=""]
node23[label="$data = mysql_fetch_array( sql_select('users', 'id, state', \"where state > 0 and id = '$id'\", 1))
"]
node24[label=""]
node25[label="return;
"]
node26[label="FormHead(\"Přidat uživatele\")
TextBox(\"Přihlašovací jméno\", 1, '', 3, 20)
TextBox(\"Heslo pro první přihlášení\", 2, RandomString(6), 5, 20)
FormBottom('', \"'txt', 'txt'\", \"3,5\", \"20,20\")
"]
node27[label="return;
"]
node28[label="$data = mysql_fetch_array( sql_select('users',\"id, state, name\",
    \"where id = '$_inf[i]' and state != 0\",1
  ))
"]
node29[label="die(\"<h1>Chyba vstupu</h1>\")
"]
node30[label="$_inf['post'] = true
Post
$_inf['form'] = true
Form
Body
$_inf['ajax'] = true
Ajax
ShowUsers
AddUser
DeleteUser
AddUserForm
DeleteUserForm
"]
node31[label=""]
node32[label=""]
node33[label="return true;
"]
node34[label=""]
node35[label=""]
node36[label=""]
node37[label=""]
node38[label=""]
node39[label="$reg = GetDatetime($data['register'])
$last = GetDatetime($data['last_login'])
$mail = $data['mail'] ? $data['mail'] : '-neuvedeno-'
"]
node40[label=""]
node41[label="echo \"<tr><td>$data[id]</td><td>$data[name]</td><td>$mail</td><td>$reg</td><td>$last</td>\";
echo \"<th><div class=\\"toolbox\\">\";
ToolButton(\"p=$_GET[p]&amp;a=user&amp;f=delete&amp;i=$data[id]\", 'Smazat uživatele', 'delete')
echo \"</div></th>\";
echo \"</tr>\";
"]
node42[label=""]
node43[label="return;
"]
node44[label="$data = mysql_fetch_array( sql_select('users', 'id', \"where name = '$name' and state != 0\") )
"]
node45[label=""]
node46[label="ThrowFormError(0, \"Uživatel neexistuje\")
return;
"]
node47[label="sql_update('users', \"state = '0'\", \"state > 0 and id = '$id'\", 1)
MakeRefresh()
"]
node48[label=""]
node49[label=""]
node50[label=""]
node51[label="Alert(\"Tento uživatel neexistuje\")
return;
"]
node52[label=""]
node53[label=""]
node54[label=""]
node55[label=""]
node56[label=""]
node57[label="$last = \"nepřihlášen\"
"]
node58[label="ThrowFormError(1, \"Uživatel tohoto jména již existuje\")
return;
"]
node59[label="$salt = RandomString(5)
sql_insert('users','name, no1, no2, register',
    \"('$name', '$salt', sha1( concat('\". SALT .\"$pass', no1) ), '\". date(\"y-m-d H:i:s\") .\"')\")
MakeRefresh()
"]
node60[label=""]
node61[label=""]
node62[label="Alert(\"Tento uživatel nemůže být odstraněn\")
return;
"]
node63[label="FormHead(\"Smazat uživatele <u>$data[name]</u>\")
HiddenBox2(1, $data['id'])
YNRadio(\"Opravdu chcete odstranit uživatele <u>$data[name]</u>?\", 2, 0)
FormBottom('')
"]
node64[label=""]
node65[label=""]
node66[label=""]
node0 -> node10[headport=n, tailport=s,label="$_GET['f']='add'"]
node0 -> node11[headport=n, tailport=s,label="$_GET['f']='delete'"]
node0 -> node12[headport=n, tailport=s,label=" else  "]
node1 -> node13[headport=n, tailport=s,label="$_GET['f']='add'"]
node1 -> node14[headport=n, tailport=s,label="$_GET['f']='delete'"]
node1 -> node15[headport=n, tailport=s,label=" else  "]
node2 -> node16[headport=n, tailport=s,label="Form()"]
node2 -> node17[headport=n, tailport=s,label=" else  "]
node3 -> node18[headport=n, tailport=s,label="   "]
node4 -> node19[headport=n, tailport=s,label="ShowSwitcher(mysql_num_rows($sql), $count, USERS_LIMIT)"]
node4 -> node20[headport=n, tailport=s,label=" else  "]
node5 -> node21[headport=n, tailport=s,label="LenghtTest(1, $name = GetCollum(1) , 3, 20)"]
node5 -> node22[headport=n, tailport=s,label=" else  "]
node6 -> node23[headport=n, tailport=s,label="GetCollum(2)"]
node6 -> node24[headport=n, tailport=s,label=" else  "]
node7 -> node25[headport=n, tailport=s,label="IsRefreshed(\"Uživatel byl přidán\")"]
node7 -> node26[headport=n, tailport=s,label=" else  "]
node8 -> node27[headport=n, tailport=s,label="IsRefreshed(\"Uživatel byl smazán\")"]
node8 -> node28[headport=n, tailport=s,label=" else  "]
node9 -> node29[headport=n, tailport=s,label="AUTORIZACE != \"Q.&dJhůs63d5dS=d56sLc5%\" or !AUTORIZACE"]
node9 -> node30[headport=n, tailport=s,label=" else  "]
node10 -> node12[headport=n, tailport=s,label="   "]
node11 -> node12[headport=n, tailport=s,label="   "]
node13 -> node33[headport=n, tailport=s,label="   "]
node14 -> node33[headport=n, tailport=s,label="   "]
node15 -> node35[headport=n, tailport=s,label="   "]
node16 -> node37[headport=n, tailport=s,label="   "]
node17 -> node37[headport=n, tailport=s,label="   "]
node19 -> node39[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node19 -> node20[headport=n, tailport=s,label=" else  "]
node20 -> node40[headport=n, tailport=s,label="   "]
node21 -> node42[headport=n, tailport=s,label="   "]
node22 -> node43[headport=n, tailport=s,label="LenghtTest(2, $pass = GetCollum(2) , 5, 20)"]
node22 -> node44[headport=n, tailport=s,label=" else  "]
node23 -> node46[headport=n, tailport=s,label="!$data"]
node23 -> node47[headport=n, tailport=s,label=" else  "]
node25 -> node48[headport=n, tailport=s,label="   "]
node26 -> node48[headport=n, tailport=s,label="   "]
node27 -> node50[headport=n, tailport=s,label="   "]
node28 -> node51[headport=n, tailport=s,label="!$data"]
node28 -> node52[headport=n, tailport=s,label=" else  "]
node29 -> node30[headport=n, tailport=s,label="   "]
node30 -> node54[headport=n, tailport=s,label="   "]
node31 -> node11[headport=n, tailport=s,label="   "]
node32 -> node12[headport=n, tailport=s,label="   "]
node33 -> node35[headport=n, tailport=s,label="   "]
node34 -> node14[headport=n, tailport=s,label="   "]
node36 -> node15[headport=n, tailport=s,label="   "]
node38 -> node17[headport=n, tailport=s,label="   "]
node39 -> node57[headport=n, tailport=s,label="!$last"]
node39 -> node41[headport=n, tailport=s,label=" else  "]
node41 -> node39[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node41 -> node20[headport=n, tailport=s,label=" else  "]
node43 -> node42[headport=n, tailport=s,label="   "]
node44 -> node58[headport=n, tailport=s,label="$data"]
node44 -> node59[headport=n, tailport=s,label=" else  "]
node45 -> node22[headport=n, tailport=s,label="   "]
node46 -> node24[headport=n, tailport=s,label="   "]
node47 -> node24[headport=n, tailport=s,label="   "]
node49 -> node26[headport=n, tailport=s,label="   "]
node51 -> node50[headport=n, tailport=s,label="   "]
node52 -> node62[headport=n, tailport=s,label="$data['state'] == -1"]
node52 -> node63[headport=n, tailport=s,label=" else  "]
node53 -> node28[headport=n, tailport=s,label="   "]
node55 -> node33[headport=n, tailport=s,label="   "]
node56 -> node35[headport=n, tailport=s,label="   "]
node57 -> node41[headport=n, tailport=s,label="   "]
node58 -> node42[headport=n, tailport=s,label="   "]
node59 -> node42[headport=n, tailport=s,label="   "]
node60 -> node44[headport=n, tailport=s,label="   "]
node61 -> node47[headport=n, tailport=s,label="   "]
node62 -> node50[headport=n, tailport=s,label="   "]
node63 -> node50[headport=n, tailport=s,label="   "]
node64 -> node52[headport=n, tailport=s,label="   "]
node65 -> node59[headport=n, tailport=s,label="   "]
node66 -> node63[headport=n, tailport=s,label="   "]

}

