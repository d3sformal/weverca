digraph g {node [shape=box]
 graph[rankdir="TB", concentrate=true];node0[label="Post
"]
node1[label="Form
"]
node2[label="Body
global $_page;
"]
node3[label="Ajax
ShowGalery()
"]
node4[label="ShowGalery
global $_page;
global $_inf;
$sql = sql_select('pages','pages.id, pages.name, pages.datum, pages.adr, pages.text, pages.ct, galery.adr as gadr, galery.id as gid',
    \"left join galery on galery.id = pages.img where pages.pid = '$_page[pid]' and pages.script = 'album' and pages.deleted = '0' order by pages.datum desc\"
    , (ALBUM_LIMIT * ($_inf['s'] - 1) ) .\",\". ALBUM_LIMIT
  )
echo \"\n<table class=\\"items\\" align=\\"center\\"><tr><td colspan=\\"4\\" class=\\"stat\\" >\";
"]
node5[label="DeleteInventory
global $_page;
$sql = sql_select('pages','id', \"where pid = '$_page[pid]' and script = 'album' and deleted = '0'\")
$dotaz = \"\"
"]
node6[label="AddAlbum
global $_page;
"]
node7[label="TruncGalery
global $_page;
"]
node8[label="DeleteGalery
global $_page;
"]
node9[label="AddAlbumForm
"]
node10[label="TruncGaleryForm
"]
node11[label="DeleteGaleryForm
"]
node12[label=""]
node13[label="return false;
"]
node14[label=""]
node15[label="return false;
"]
node16[label=""]
node17[label="echo \"<div class=\\"toolbox\\">\";
ToolButton(\"p=$_GET[p]\", 'Zobrazit galerii', 'page', false)
ToolButton(\"p=$_GET[p]&amp;a=galery&amp;f=properties\", 'Vlastnosti galerie', 'buble')
ToolButton(\"p=$_GET[p]&amp;a=galery&amp;f=add\", 'Přidat album', 'plus')
ToolButton(\"p=$_GET[p]&amp;a=galery&amp;f=trunc\", 'Smazat všechny alba', 'delete_all')
ToolButton(\"p=$_GET[p]&amp;a=galery&amp;f=delete\", 'Smazat galerii', 'delete')
echo \"</div><div class=\\"float_cl\\">&nbsp;</div>\";
"]
node18[label=""]
node19[label=""]
node20[label="echo \"</td></tr>\";
$load = mysql_fetch_array($sql)
"]
node21[label="echo \"</td></tr>\";
"]
node22[label=""]
node23[label=""]
node24[label="return;
"]
node25[label=""]
node26[label="DeleteInventory()
sql_update('pages',\"deleted = '1'\", \"pid = '$_page[pid]' and deleted = '0' and script = 'album'\")
sql_update('pages', 'ct = 0', \"id = $_page[id] and deleted = 0\", 1)
MakeRefresh()
"]
node27[label=""]
node28[label="DeleteInventory()
sql_update('pages',\"pos = pos - 1\", \"pid = '$_page[pid]' and pos > $_page[pos] and deleted = '0'\")
sql_update('pages',\"deleted = '1'\",
      \"(pid = '$_page[pid]' and deleted = '0' and script = 'album') or id = '$_page[id]'\"
    )
sql_update('pages', 'ct = ct - 1, img = 0', \"id = $_page[pid] and deleted = 0\", 1)
MakeRefresh(\"index.php?p=$_page[pid]&amp;a=menu\", 2)
"]
node29[label=""]
node30[label="return;
"]
node31[label="FormHead(\"Přidat album\")
TextBox(\"Jméno\", 1, '', 3, 40)
TextBox(\"Titulek\", 2, '', 0, 100)
FormBottom('', \"'txt', 'txt'\", \"3, 0\", \"30, 100\")
"]
node32[label="return;
"]
node33[label="FormHead(\"Smazat všechny alba\")
YNRadio(\"Opravdu chcete odstranit veškerá alba?\", 1, 0)
FormBottom('')
"]
node34[label="return;
"]
node35[label="FormHead(\"Smazat tuto galerii\")
YNRadio(\"Opravdu chcete odstranit tuto galerii a sní veškerá její alba?\", 1, 0)
FormBottom('')
"]
node36[label="die(\"<h1>Chyba vstupu</h1>\")
"]
node37[label="$_inf['post'] = true
Post
$_inf['form'] = true
Form
Body
$_inf['ajax'] = true
Ajax
ShowGalery
DeleteInventory
AddAlbum
TruncGalery
DeleteGalery
AddAlbumForm
TruncGaleryForm
DeleteGaleryForm
"]
node38[label=""]
node39[label="AddAlbum()
"]
node40[label="PropertiesPost()
"]
node41[label="TruncGalery()
"]
node42[label="DeleteGalery()
"]
node43[label=""]
node44[label=""]
node45[label="AddAlbumForm()
"]
node46[label="PropertiesForm('galerie')
"]
node47[label="TruncGaleryForm()
"]
node48[label="DeleteGaleryForm()
"]
node49[label="return false;
"]
node50[label=""]
node51[label="return;
"]
node52[label="echo \"\n<div id=\\"ajax_target\\" >\";
ShowGalery()
echo \"\n</div>\";
"]
node53[label="$box = 0
$x = 1
"]
node54[label="echo \"</table>\";
"]
node55[label="$dotaz .= \" or \"
"]
node56[label="$dotaz .= \"pid = $data[id]\"
"]
node57[label="$sql = sql_select('galery',\"id, pid, adr\", \"where ($dotaz) and zob = 1\")
"]
node58[label=""]
node59[label=""]
node60[label="return;
"]
node61[label="sql_insert('pages','name, adr, datum, pid, pos, script, color, title',
    \"('$name', '\". MakeAdres($name) .\"', '\". date(\"y-m-d H:i:s\") .\"', '$_page[pid]', '0', 'album', '$_page[color]', '$title')\"
  )
sql_update('pages', 'ct = ct + 1', \"id = $_page[id] and deleted = 0\", 1)
MakeRefresh()
"]
node62[label=""]
node63[label=""]
node64[label=""]
node65[label=""]
node66[label=""]
node67[label=""]
node68[label=""]
node69[label=""]
node70[label=""]
node71[label=""]
node72[label=""]
node73[label=""]
node74[label="return true;
"]
node75[label=""]
node76[label=""]
node77[label=""]
node78[label=""]
node79[label=""]
node80[label=""]
node81[label=""]
node82[label=""]
node83[label=""]
node84[label=""]
node85[label="$file = \"$data[id]_$data[adr].jpg\"
"]
node86[label="sql_delete('galery', \"($dotaz) and zob = '1'\")
sql_delete('texts',\"$dotaz\")
"]
node87[label=""]
node88[label=""]
node89[label=""]
node90[label=""]
node91[label=""]
node92[label="$x++
"]
node93[label=""]
node94[label="unlink(\"galery/$file\")
"]
node95[label=""]
node96[label=""]
node97[label=""]
node98[label="echo \"\n  <tr>\";
$x = 1
"]
node99[label="echo \"\n  <tr>\";
$x = 1
"]
node100[label="$load = mysql_fetch_array($sql)
"]
node101[label="echo \"\n  <tr>\";
$x = 1
"]
node102[label="echo \"</tr>\";
"]
node103[label="$box--
"]
node104[label="unlink(\"galery/thumbs/$file\")
"]
node105[label="$box = 2
"]
node106[label=""]
node107[label=""]
node108[label=""]
node109[label="echo \"</tr>\";
"]
node110[label="$box = 1
"]
node111[label=""]
node112[label="echo \"</tr>\";
"]
node113[label=""]
node114[label="$x++
"]
node115[label=""]
node116[label="$x++
"]
node117[label=""]
node118[label="$x++
"]
node119[label=""]
node120[label="echo \"<td class=\\"blank\\">&nbsp;</td>\";
"]
node121[label="$adr = \"$data[id]_$data[adr]\"
echo \"<th><div class=\\"toolbox\\">\";
ToolButton(\"p=$adr&amp;a=album&amp;f=properties\", 'Vlastnosi alba', 'buble')
ToolButton(\"p=$adr&amp;a=album&amp;f=move\", 'Přesunout album do jiné galerie', 'folder')
ToolButton(\"p=$adr&amp;a=album&amp;f=delete_all\", 'Smazat album', 'delete')
echo \"</div></th>\";
"]
node122[label="echo \"<th>\";
$cz = (!$data['ct'] || $data['ct'] > 4) ? \"obrázků\" : ( $data['ct'] > 1 ? \"obrázky\" : \"obrázek\" )
echo \"<div class=\\"date\\"><div style=\\"float: left\\">\". GetDatetime($data['datum']) .\"</div>$data[ct] $cz</div>\";
echo \"<a href=\\"index.php?p=$data[id]_$data[adr]\\">$data[name]</a>\";
echo \"</th>\";
"]
node123[label="echo \"<td class=\\"blank\\">&nbsp;</td>\";
"]
node124[label=""]
node125[label="echo \"<td class=\\"blank\\">&nbsp;</td>\";
"]
node126[label="echo \"<td class=\\"imgBox\\"><a href=\\"index.php?p=$data[id]_$data[adr]\\"><img src=\\"galery/thumbs/$data[gid]_$data[gadr].jpg\\" alt=\\"galery/thumbs/$data[gid]_$data[gadr].jpg\\" /></a></td>\";
$tab[$x]['gid'] = false
"]
node127[label="echo \"<td>\". format_text($data['text'],1) .\"</td>\";
$tab[$x]['text'] = false
"]
node128[label="echo \"<td class=\\"blank\\">&nbsp;</td>\";
"]
node129[label="$data['script'] = \"article\"
"]
node130[label=""]
node0 -> node13[headport=n, tailport=s,label="LCK && !IsLoged()"]
node0 -> node14[headport=n, tailport=s,label=" else  "]
node1 -> node15[headport=n, tailport=s,label="LCK && !IsLoged()"]
node1 -> node16[headport=n, tailport=s,label=" else  "]
node2 -> node17[headport=n, tailport=s,label="IsLoged() || !LCK"]
node2 -> node18[headport=n, tailport=s,label=" else  "]
node3 -> node19[headport=n, tailport=s,label="   "]
node4 -> node20[headport=n, tailport=s,label="ShowSwitcher(mysql_num_rows($sql), $_page['ct'], ALBUM_LIMIT)"]
node4 -> node21[headport=n, tailport=s,label=" else  "]
node5 -> node22[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node5 -> node23[headport=n, tailport=s,label=" else  "]
node6 -> node24[headport=n, tailport=s,label="LenghtTest(1, $name = GetCollum(1) , 3, 40)"]
node6 -> node25[headport=n, tailport=s,label=" else  "]
node7 -> node26[headport=n, tailport=s,label="GetCollum(1)"]
node7 -> node27[headport=n, tailport=s,label=" else  "]
node8 -> node28[headport=n, tailport=s,label="GetCollum(1)"]
node8 -> node29[headport=n, tailport=s,label=" else  "]
node9 -> node30[headport=n, tailport=s,label="IsRefreshed(\"Album bylo přidáno\")"]
node9 -> node31[headport=n, tailport=s,label=" else  "]
node10 -> node32[headport=n, tailport=s,label="IsRefreshed(\"Galerie byla vyprázdněna\")"]
node10 -> node33[headport=n, tailport=s,label=" else  "]
node11 -> node34[headport=n, tailport=s,label="IsRefreshed(\"Galerie byla smazána\")"]
node11 -> node35[headport=n, tailport=s,label=" else  "]
node12 -> node36[headport=n, tailport=s,label="AUTORIZACE != \"Q.&dJhůs63d5dS=d56sLc5%\" or !AUTORIZACE"]
node12 -> node37[headport=n, tailport=s,label=" else  "]
node13 -> node38[headport=n, tailport=s,label="   "]
node14 -> node39[headport=n, tailport=s,label="$_GET['f']='add'"]
node14 -> node40[headport=n, tailport=s,label="$_GET['f']='properties'"]
node14 -> node41[headport=n, tailport=s,label="$_GET['f']='trunc'"]
node14 -> node42[headport=n, tailport=s,label="$_GET['f']='delete'"]
node14 -> node38[headport=n, tailport=s,label=" else  "]
node15 -> node44[headport=n, tailport=s,label="   "]
node16 -> node45[headport=n, tailport=s,label="$_GET['f']='add'"]
node16 -> node46[headport=n, tailport=s,label="$_GET['f']='properties'"]
node16 -> node47[headport=n, tailport=s,label="$_GET['f']='trunc'"]
node16 -> node48[headport=n, tailport=s,label="$_GET['f']='delete'"]
node16 -> node49[headport=n, tailport=s,label=" else  "]
node17 -> node18[headport=n, tailport=s,label="   "]
node18 -> node51[headport=n, tailport=s,label="Form()"]
node18 -> node52[headport=n, tailport=s,label=" else  "]
node20 -> node53[headport=n, tailport=s,label="$load"]
node20 -> node54[headport=n, tailport=s,label=" else  "]
node21 -> node54[headport=n, tailport=s,label="   "]
node22 -> node55[headport=n, tailport=s,label="$dotaz"]
node22 -> node56[headport=n, tailport=s,label=" else  "]
node23 -> node57[headport=n, tailport=s,label="$dotaz"]
node23 -> node58[headport=n, tailport=s,label=" else  "]
node24 -> node59[headport=n, tailport=s,label="   "]
node25 -> node60[headport=n, tailport=s,label="LenghtTest(2, $title = GetCollum(2) , 0, 100)"]
node25 -> node61[headport=n, tailport=s,label=" else  "]
node26 -> node27[headport=n, tailport=s,label="   "]
node28 -> node29[headport=n, tailport=s,label="   "]
node30 -> node63[headport=n, tailport=s,label="   "]
node31 -> node63[headport=n, tailport=s,label="   "]
node32 -> node65[headport=n, tailport=s,label="   "]
node33 -> node65[headport=n, tailport=s,label="   "]
node34 -> node67[headport=n, tailport=s,label="   "]
node35 -> node67[headport=n, tailport=s,label="   "]
node36 -> node37[headport=n, tailport=s,label="   "]
node37 -> node69[headport=n, tailport=s,label="   "]
node39 -> node38[headport=n, tailport=s,label="   "]
node40 -> node38[headport=n, tailport=s,label="   "]
node41 -> node38[headport=n, tailport=s,label="   "]
node42 -> node38[headport=n, tailport=s,label="   "]
node43 -> node14[headport=n, tailport=s,label="   "]
node45 -> node74[headport=n, tailport=s,label="   "]
node46 -> node74[headport=n, tailport=s,label="   "]
node47 -> node74[headport=n, tailport=s,label="   "]
node48 -> node74[headport=n, tailport=s,label="   "]
node49 -> node44[headport=n, tailport=s,label="   "]
node50 -> node16[headport=n, tailport=s,label="   "]
node51 -> node80[headport=n, tailport=s,label="   "]
node52 -> node80[headport=n, tailport=s,label="   "]
node53 -> node82[headport=n, tailport=s,label="   "]
node54 -> node84[headport=n, tailport=s,label="   "]
node55 -> node56[headport=n, tailport=s,label="   "]
node56 -> node22[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node56 -> node23[headport=n, tailport=s,label=" else  "]
node57 -> node85[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node57 -> node86[headport=n, tailport=s,label=" else  "]
node60 -> node59[headport=n, tailport=s,label="   "]
node61 -> node59[headport=n, tailport=s,label="   "]
node62 -> node25[headport=n, tailport=s,label="   "]
node64 -> node31[headport=n, tailport=s,label="   "]
node66 -> node33[headport=n, tailport=s,label="   "]
node68 -> node35[headport=n, tailport=s,label="   "]
node70 -> node38[headport=n, tailport=s,label="   "]
node71 -> node40[headport=n, tailport=s,label="   "]
node72 -> node41[headport=n, tailport=s,label="   "]
node73 -> node42[headport=n, tailport=s,label="   "]
node74 -> node44[headport=n, tailport=s,label="   "]
node75 -> node44[headport=n, tailport=s,label="   "]
node76 -> node46[headport=n, tailport=s,label="   "]
node77 -> node47[headport=n, tailport=s,label="   "]
node78 -> node48[headport=n, tailport=s,label="   "]
node79 -> node49[headport=n, tailport=s,label="   "]
node81 -> node52[headport=n, tailport=s,label="   "]
node82 -> node90[headport=n, tailport=s,label="$x <= TABLE_ITEMS"]
node82 -> node91[headport=n, tailport=s,label=" else  "]
node83 -> node53[headport=n, tailport=s,label="$load"]
node83 -> node54[headport=n, tailport=s,label=" else  "]
node85 -> node94[headport=n, tailport=s,label="is_file(\"galery/$file\")"]
node85 -> node95[headport=n, tailport=s,label=" else  "]
node86 -> node58[headport=n, tailport=s,label="   "]
node87 -> node61[headport=n, tailport=s,label="   "]
node88 -> node70[headport=n, tailport=s,label="   "]
node89 -> node74[headport=n, tailport=s,label="   "]
node90 -> node97[headport=n, tailport=s,label="$tab[$x] = $load"]
node90 -> node92[headport=n, tailport=s,label=" else  "]
node91 -> node98[headport=n, tailport=s,label="!LCK || IsLoged()"]
node91 -> node99[headport=n, tailport=s,label=" else  "]
node92 -> node82[headport=n, tailport=s,label="   "]
node93 -> node101[headport=n, tailport=s,label="$box > 0"]
node93 -> node83[headport=n, tailport=s,label=" else  "]
node94 -> node95[headport=n, tailport=s,label="   "]
node95 -> node104[headport=n, tailport=s,label="is_file(\"galery/thumbs/$file\")"]
node95 -> node96[headport=n, tailport=s,label=" else  "]
node96 -> node85[headport=n, tailport=s,label="$data = mysql_fetch_array($sql)"]
node96 -> node86[headport=n, tailport=s,label=" else  "]
node97 -> node105[headport=n, tailport=s,label="$load['text'] && $load['gid']"]
node97 -> node106[headport=n, tailport=s,label=" else  "]
node98 -> node107[headport=n, tailport=s,label="   "]
node99 -> node108[headport=n, tailport=s,label="   "]
node100 -> node92[headport=n, tailport=s,label="   "]
node101 -> node111[headport=n, tailport=s,label="   "]
node102 -> node93[headport=n, tailport=s,label="   "]
node103 -> node93[headport=n, tailport=s,label="   "]
node104 -> node96[headport=n, tailport=s,label="   "]
node105 -> node100[headport=n, tailport=s,label="   "]
node106 -> node110[headport=n, tailport=s,label="$box < 1 && ($load['text'] || $load['gid'])"]
node106 -> node100[headport=n, tailport=s,label=" else  "]
node107 -> node113[headport=n, tailport=s,label="$x <= TABLE_ITEMS"]
node107 -> node109[headport=n, tailport=s,label=" else  "]
node108 -> node115[headport=n, tailport=s,label="$x <= TABLE_ITEMS"]
node108 -> node102[headport=n, tailport=s,label=" else  "]
node109 -> node99[headport=n, tailport=s,label="   "]
node110 -> node100[headport=n, tailport=s,label="   "]
node111 -> node117[headport=n, tailport=s,label="$x <= TABLE_ITEMS"]
node111 -> node112[headport=n, tailport=s,label=" else  "]
node112 -> node103[headport=n, tailport=s,label="   "]
node113 -> node119[headport=n, tailport=s,label="$data = $tab[$x]"]
node113 -> node120[headport=n, tailport=s,label=" else  "]
node114 -> node107[headport=n, tailport=s,label="   "]
node115 -> node122[headport=n, tailport=s,label="$data = $tab[$x]"]
node115 -> node123[headport=n, tailport=s,label=" else  "]
node116 -> node108[headport=n, tailport=s,label="   "]
node117 -> node124[headport=n, tailport=s,label="$data = $tab[$x]"]
node117 -> node125[headport=n, tailport=s,label=" else  "]
node118 -> node111[headport=n, tailport=s,label="   "]
node119 -> node129[headport=n, tailport=s,label="!$data['script']"]
node119 -> node121[headport=n, tailport=s,label=" else  "]
node120 -> node114[headport=n, tailport=s,label="   "]
node121 -> node114[headport=n, tailport=s,label="   "]
node122 -> node116[headport=n, tailport=s,label="   "]
node123 -> node116[headport=n, tailport=s,label="   "]
node124 -> node126[headport=n, tailport=s,label="$data['gid']"]
node124 -> node130[headport=n, tailport=s,label=" else  "]
node125 -> node118[headport=n, tailport=s,label="   "]
node126 -> node118[headport=n, tailport=s,label="   "]
node127 -> node118[headport=n, tailport=s,label="   "]
node128 -> node118[headport=n, tailport=s,label="   "]
node129 -> node121[headport=n, tailport=s,label="   "]
node130 -> node127[headport=n, tailport=s,label="$data['text']"]
node130 -> node128[headport=n, tailport=s,label=" else  "]

}

